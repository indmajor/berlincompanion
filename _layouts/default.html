<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

{%- include head.html -%}

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
crossorigin=""/>

<body>

  <div class="map" id="berlin-map" style="height: 500px"></div>

  <main class="page-content" aria-label="Content">
    <div class="wrapper">
      {{ content }}
    </div>
  </main>

  <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
  integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
  crossorigin=""></script>
  <script>

  var lat = 52.5200;
  var lng = 13.4050;
  var zoom = 11;

  {% if page.lat and page.lng %}
    lat = {{ page.lat }};
    lng = {{ page.lng }};
    zoom = 15;
  {% endif %}

  var map = L.map('berlin-map').setView([lat, lng], zoom);

  L.tileLayer('https://a.tile.openstreetmap.org/{z}/{x}/{y}.png ', {
    maxZoom: 18,
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(map);

  {% for post in site.posts %}
    var marker = L.marker([{{ post.lat}}, {{ post.lng }}]).addTo(map);
    marker.bindPopup('<a href="{{ post.url | relative_url }}"><img src={{ post.feature_image | relative_url }}>{{ post.title }}</a>');
    {% if post.url == page.url %}
      marker.bindPopup('{{ post.title }}', {'closeButton': false}).openPopup();
    {% endif %}
  {% endfor %}

  </script>


  {%- include footer.html -%}


</body>

</html>
